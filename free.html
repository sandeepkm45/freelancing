<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FreelanceHub - Connect with Freelancers and Clients</title>
  <!-- <link rel="stylesheet" href="freelancer.css"> -->
   <style>
    /* style.css */

/* Base styles and resets */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: #333;
    background-color: #f9f9f9;
  }
  
  a {
    text-decoration: none;
    color: #3498db;
  }
  
  ul {
    list-style: none;
  }
  
  img {
    max-width: 100%;
  }
  
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }
  
  .hidden {
    display: none !important;
  }
  
  /* Button styles */
  .btn-primary, .btn-secondary {
    display: inline-block;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    border: none;
    font-size: 16px;
  }
  
  .btn-primary {
    background-color: #3498db;
    color: white;
  }
  
  .btn-primary:hover {
    background-color: #2980b9;
  }
  
  .btn-secondary {
    background-color: #ecf0f1;
    color: #2c3e50;
    border: 1px solid #bdc3c7;
  }
  
  .btn-secondary:hover {
    background-color: #bdc3c7;
  }
  
  /* Header styles */
  header {
    background-color: white;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    position: sticky;
    top: 0;
    z-index: 100;
  }
  
  header .container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
  }
  
  .logo h1 {
    color: #3498db;
    font-size: 24px;
  }
  
  nav ul {
    display: flex;
  }
  
  nav ul li {
    margin-left: 20px;
  }
  
  nav ul li a {
    color: #2c3e50;
    font-weight: 500;
    transition: color 0.3s ease;
  }
  
  nav ul li a:hover {
    color: #3498db;
  }
  
  /* Hero section */
  .hero {
    padding: 80px 0;
    background-color: #f1f9ff;
  }
  
  .hero .container {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  
  .hero-content {
    flex: 1;
    padding-right: 50px;
  }
  
  .hero-content h2 {
    font-size: 42px;
    margin-bottom: 20px;
    color: #2c3e50;
  }
  
  .hero-content p {
    font-size: 18px;
    color: #7f8c8d;
    margin-bottom: 30px;
  }
  
  .hero-buttons {
    display: flex;
    gap: 15px;
  }
  
  .hero-image {
    flex: 1;
    text-align: center;
  }
  
  /* Form styles */
  .auth-container {
    max-width: 600px;
    margin: 50px auto;
    background: white;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    overflow: hidden;
  }
  
  .auth-options {
    display: flex;
    border-bottom: 1px solid #eee;
  }
  
  .auth-option-btn {
    flex: 1;
    padding: 15px;
    border: none;
    background: #f8f9fa;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
    transition: all 0.3s ease;
  }
  
  .auth-option-btn.active {
    background: #3498db;
    color: white;
  }
  
  .auth-form {
    padding: 30px;
  }
  
  .auth-form h2 {
    margin-bottom: 20px;
    text-align: center;
    color: #2c3e50;
  }
  
  .form-group {
    margin-bottom: 20px;
  }
  
  .form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
  }
  
  .form-group input {
    width: 100%;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 16px;
  }
  
  form button {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
  }
  
  .auth-redirect {
    text-align: center;
    margin-top: 20px;
    font-size: 14px;
  }
  
  /* Freelancers list styles */
  .freelancers-page {
    padding: 50px 0;
  }
  
  .search-container {
    margin: 30px 0;
  }
  
  #search-form {
    display: flex;
    gap: 10px;
  }
  
  #search-skills {
    flex: 1;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 16px;
  }
  
  .freelancers-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 30px;
  }
  
  .freelancer-card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  
  .freelancer-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  }
  
  .freelancer-card .freelancer-info {
    padding: 20px;
  }
  
  .freelancer-card h3 {
    margin-bottom: 10px;
    color: #2c3e50;
  }
  
  .freelancer-card .rate {
    font-weight: 700;
    color: #27ae60;
    margin-bottom: 15px;
  }
  
  .skills-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 15px;
  }
  
  .skill-tag {
    background: #edf2f7;
    padding: 5px 10px;
    border-radius: 20px;
    font-size: 14px;
    color: #4a5568;
  }
  
  .freelancer-card .action-btn {
    width: 100%;
    padding: 12px;
    border: none;
    background: #3498db;
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  
  .freelancer-card .action-btn:hover {
    background: #2980b9;
  }
  
  /* Freelancer profile styles */
  .profile-container {
    background: white;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    margin: 30px 0;
  }
  
  .back-button {
    margin: 20px 0;
  }
  
  .back-button a {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #4a5568;
    font-weight: 500;
  }
  
  .back-button a:hover {
    color: #3498db;
  }
  
  .profile-header {
    background: #3498db;
    color: white;
    padding: 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .profile-header h2 {
    font-size: 32px;
  }
  
  .profile-header .rate {
    font-size: 24px;
    font-weight: 700;
  }
  
  .profile-content {
    padding: 30px;
  }
  
  .profile-content h3 {
    margin-bottom: 15px;
    color: #2c3e50;
  }
  
  .profile-content section {
    margin-bottom: 30px;
  }
  
  .contact-section {
    margin-top: 30px;
  }
  
  /* Dashboard styles */
  .dashboard-content {
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px;
    margin: 30px 0;
  }
  
  .dashboard-card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
    padding: 20px;
  }
  
  .dashboard-card h3 {
    margin-bottom: 15px;
    color: #2c3e50;
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
  }
  
  .profile-info p {
    margin-bottom: 10px;
  }
  
  /* Alert styles */
/* Alert styles continued */
.alert-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
    max-width: 400px;
    width: 100%;
  }
  
  .alert {
    padding: 15px;
    border-radius: 5px;
    margin-bottom: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    animation: slideIn 0.3s ease;
  }
  
  @keyframes slideIn {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
  
  .alert.success {
    background-color: #d4edda;
    color: #155724;
    border-left: 4px solid #28a745;
  }
  
  .alert.error {
    background-color: #f8d7da;
    color: #721c24;
    border-left: 4px solid #dc3545;
  }
  
  .close-alert {
    cursor: pointer;
    font-size: 20px;
    font-weight: bold;
  }
  
  /* Footer styles */
  footer {
    background: #2c3e50;
    color: white;
    padding: 30px 0;
    text-align: center;
    margin-top: 50px;
  }
  
  /* Responsive styles */
  @media (max-width: 992px) {
    .hero .container {
      flex-direction: column;
      text-align: center;
    }
    
    .hero-content {
      padding-right: 0;
      margin-bottom: 40px;
    }
    
    .hero-buttons {
      justify-content: center;
    }
  }
  
  @media (max-width: 768px) {
    header .container {
      flex-direction: column;
    }
    
    nav ul {
      margin-top: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    nav ul li {
      margin: 5px 10px;
    }
    
    .freelancers-grid {
      grid-template-columns: 1fr;
    }
    
    .profile-header {
      flex-direction: column;
      text-align: center;
    }
    
    .profile-header .rate {
      margin-top: 10px;
    }
  }
  
  /* Placeholder styles */
  .placeholder {
    position: relative;
    overflow: hidden;
  }
  
  .placeholder::after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    transform: translateX(-100%);
    background-image: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0) 0,
      rgba(255, 255, 255, 0.2) 20%,
      rgba(255, 255, 255, 0.5) 60%,
      rgba(255, 255, 255, 0)
    );
    animation: shimmer 2s infinite;
  }
  
  @keyframes shimmer {
    100% {
      transform: translateX(100%);
    }
  }
   </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <header>
    <div class="container">
      <div class="logo">
        <h1>FreelanceHub</h1>
      </div>
      <nav>
        <ul>
          <li><a href="#" id="nav-home">Home</a></li>
          <li><a href="#" id="nav-freelancers">Find Freelancers</a></li>
          <li><a href="#" id="nav-login">Login</a></li>
          <li><a href="#" id="nav-register" class="btn-primary">Register</a></li>
          <li><a href="#" id="nav-dashboard" class="hidden">Dashboard</a></li>
          <li><a href="#" id="nav-logout" class="hidden">Logout</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Main content area that changes based on navigation -->
  <main id="app">
    <!-- Home Page Content -->
    <section id="home-page" class="hero">
      <div class="container">
        <div class="hero-content">
          <h2>Find the perfect match for your project</h2>
          <p>Connect with skilled freelancers or find exciting projects as a freelancer</p>
          <div class="hero-buttons">
            <button id="join-as-client" class="btn-primary">Hire a Freelancer</button>
            <button id="join-as-freelancer" class="btn-secondary">Work as a Freelancer</button>
          </div>
        </div>
        <div class="hero-image">
          <img src="https://via.placeholder.com/600x400" alt="Freelancing Platform">
        </div>
      </div>
    </section>

    <!-- Registration Page -->
    <section id="register-page" class="hidden">
      <div class="container">
        <div class="auth-container">
          <div class="auth-options">
            <button id="show-freelancer-register" class="auth-option-btn active">Join as Freelancer</button>
            <button id="show-client-register" class="auth-option-btn">Join as Client</button>
          </div>
          
          <!-- Freelancer Registration Form -->
          <div id="freelancer-register-form" class="auth-form">
            <h2>Create a Freelancer Account</h2>
            <form id="freelancer-form">
              <div class="form-group">
                <label for="freelancer-name">Full Name</label>
                <input type="text" id="freelancer-name" required>
              </div>
              <div class="form-group">
                <label for="freelancer-email">Email Address</label>
                <input type="email" id="freelancer-email" required>
              </div>
              <div class="form-group">
                <label for="freelancer-password">Password</label>
                <input type="password" id="freelancer-password" required>
              </div>
              <div class="form-group">
                <label for="freelancer-skills">Skills (comma separated)</label>
                <input type="text" id="freelancer-skills" required placeholder="e.g. JavaScript, Web Design, Python">
              </div>
              <div class="form-group">
                <label for="freelancer-portfolio">Portfolio URL</label>
                <input type="url" id="freelancer-portfolio" placeholder="https://yourportfolio.com">
              </div>
              <div class="form-group">
                <label for="freelancer-rate">Hourly Rate ($)</label>
                <input type="number" id="freelancer-rate" min="0">
              </div>
              <button type="submit" class="btn-primary">Register as Freelancer</button>
            </form>
            <p class="auth-redirect">Already have an account? <a href="#" id="go-to-login">Login</a></p>
          </div>
          
          <!-- Client Registration Form -->
          <div id="client-register-form" class="auth-form hidden">
            <h2>Create a Client Account</h2>
            <form id="client-form">
              <div class="form-group">
                <label for="client-name">Full Name</label>
                <input type="text" id="client-name" required>
              </div>
              <div class="form-group">
                <label for="client-email">Email Address</label>
                <input type="email" id="client-email" required>
              </div>
              <div class="form-group">
                <label for="client-password">Password</label>
                <input type="password" id="client-password" required>
              </div>
              <div class="form-group">
                <label for="client-company">Company (Optional)</label>
                <input type="text" id="client-company">
              </div>
              <button type="submit" class="btn-primary">Register as Client</button>
            </form>
            <p class="auth-redirect">Already have an account? <a href="#" id="go-to-login-from-client">Login</a></p>
          </div>
        </div>
      </div>
    </section>

    <!-- Login Page -->
    <section id="login-page" class="hidden">
      <div class="container">
        <div class="auth-container">
          <div class="auth-options">
            <button id="show-freelancer-login" class="auth-option-btn active">Freelancer Login</button>
            <button id="show-client-login" class="auth-option-btn">Client Login</button>
          </div>
          
          <div class="auth-form" id="login-form">
            <h2>Login to Your Account</h2>
            <form id="login-form-element">
              <div class="form-group">
                <label for="login-email">Email</label>
                <input type="email" id="login-email" required>
              </div>
              <div class="form-group">
                <label for="login-password">Password</label>
                <input type="password" id="login-password" required>
              </div>
              <input type="hidden" id="login-user-type" value="freelancer">
              <button type="submit" class="btn-primary">Login</button>
            </form>
            <p class="auth-redirect">Don't have an account? <a href="#" id="go-to-register">Register</a></p>
          </div>
        </div>
      </div>
    </section>

    <!-- Freelancers Browse Page -->
    <section id="freelancers-page" class="hidden">
      <div class="container">
        <h2>Browse Talented Freelancers</h2>
        
        <div class="search-container">
          <form id="search-form">
            <input type="text" id="search-skills" placeholder="Search by skills...">
            <button type="submit" class="btn-primary">Search</button>
          </form>
        </div>
        
        <div id="freelancers-list" class="freelancers-grid">
          <!-- Freelancers will be loaded here dynamically -->
          <div class="freelancer-card placeholder">
            <div class="freelancer-info">
              <h3>Loading freelancers...</h3>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Freelancer Detail Page -->
    <section id="freelancer-detail-page" class="hidden">
      <div class="container">
        <div class="back-button">
          <a href="#" id="back-to-freelancers"><i class="fas fa-arrow-left"></i> Back to all freelancers</a>
        </div>
        
        <div id="freelancer-profile" class="profile-container">
          <!-- Freelancer details will be loaded here dynamically -->
          <div class="profile-header">
            <h2 id="profile-name">Freelancer Name</h2>
            <p class="rate"><span id="profile-rate">$0</span>/hr</p>
          </div>
          
          <div class="profile-content">
            <div class="skills-section">
              <h3>Skills</h3>
              <div id="profile-skills" class="skills-tags">
                <!-- Skills will be added here -->
              </div>
            </div>
            
            <div class="portfolio-section">
              <h3>Portfolio</h3>
              <p id="profile-portfolio">Portfolio URL will appear here</p>
            </div>
            
            <div class="contact-section">
              <button id="contact-freelancer" class="btn-primary">Contact Freelancer</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Dashboard Page -->
    <section id="dashboard-page" class="hidden">
      <div class="container">
        <h2>Welcome, <span id="user-name">User</span>!</h2>
        <div class="dashboard-content">
          <!-- Content depends on user type (freelancer or client) -->
          <div id="freelancer-dashboard" class="hidden">
            <div class="dashboard-card">
              <h3>Your Profile</h3>
              <div class="profile-info">
                <p><strong>Name:</strong> <span id="dashboard-name"></span></p>
                <p><strong>Email:</strong> <span id="dashboard-email"></span></p>
                <p><strong>Skills:</strong> <span id="dashboard-skills"></span></p>
                <p><strong>Hourly Rate:</strong> $<span id="dashboard-rate"></span></p>
                <p><strong>Portfolio:</strong> <a id="dashboard-portfolio" href="#" target="_blank">View Portfolio</a></p>
              </div>
              <button class="btn-secondary">Edit Profile</button>
            </div>
          </div>
          
          <div id="client-dashboard" class="hidden">
            <div class="dashboard-card">
              <h3>Your Profile</h3>
              <div class="profile-info">
                <p><strong>Name:</strong> <span id="dashboard-client-name"></span></p>
                <p><strong>Email:</strong> <span id="dashboard-client-email"></span></p>
                <p><strong>Company:</strong> <span id="dashboard-client-company"></span></p>
              </div>
              <button class="btn-secondary">Edit Profile</button>
            </div>
            
            <div class="dashboard-card">
              <h3>Find Freelancers</h3>
              <p>Search our database of talented freelancers to find the perfect match for your project.</p>
              <button id="dashboard-find-freelancers" class="btn-primary">Browse Freelancers</button>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Success Alert -->
    <div id="success-alert" class="alert-container hidden">
      <div class="alert success">
        <p id="success-message">Operation successful!</p>
        <span class="close-alert">&times;</span>
      </div>
    </div>
    
    <!-- Error Alert -->
    <div id="error-alert" class="alert-container hidden">
      <div class="alert error">
        <p id="error-message">An error occurred!</p>
        <span class="close-alert">&times;</span>
      </div>
    </div>
  </main>

  <footer>
    <div class="container">
      <p>&copy; 2025 FreelanceHub. All rights reserved.</p>
    </div>
  </footer>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { 
      initializeApp, 
      getFirestore, 
      collection, 
      addDoc,
      getDocs,
      doc,
      getDoc,
      query,
      where 
    } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore.js";
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyC_4ImmkQfHuhpQuFtAjtb0485ZhVxV3p4",
      authDomain: "freelancehub-a1f32.firebaseapp.com",
      projectId: "freelancehub-a1f32",
      storageBucket: "freelancehub-a1f32.firebasestorage.app",
      messagingSenderId: "443483995651",
      appId: "1:443483995651:web:7d49449f605aeb183b5836",
      measurementId: "G-PMN8VY94Y3"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    
    // Make Firebase functions available globally
    window.db = db;
    window.collection = collection;
    window.addDoc = addDoc;
    window.getDocs = getDocs;
    window.doc = doc;
    window.getDoc = getDoc;
    window.query = query;
    window.where = where;
  </script>
<!-- <script src="freelancer.css"></script> -->
 <script>// Import the Firebase functions properly at the beginning of the script
    import { 
        initializeApp, 
        getFirestore, 
        collection, 
        addDoc,
        getDocs,
        doc,
        getDoc,
        query,
        where 
      } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore.js";
      
      // Initialize Firebase with your config
      const firebaseConfig = {
        apiKey: "AIzaSyC_4ImmkQfHuhpQuFtAjtb0485ZhVxV3p4",
        authDomain: "freelancehub-a1f32.firebaseapp.com",
        projectId: "freelancehub-a1f32",
        storageBucket: "freelancehub-a1f32.firebasestorage.app",
        messagingSenderId: "443483995651",
        appId: "1:443483995651:web:7d49449f605aeb183b5836",
        measurementId: "G-PMN8VY94Y3"
      };
      
      // Initialize Firebase once the document is loaded
      document.addEventListener('DOMContentLoaded', function() {
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // DOM elements - Navigation
        const navHome = document.getElementById('nav-home');
        const navFreelancers = document.getElementById('nav-freelancers');
        const navLogin = document.getElementById('nav-login');
        const navRegister = document.getElementById('nav-register');
        const navDashboard = document.getElementById('nav-dashboard');
        const navLogout = document.getElementById('nav-logout');
        
        // Page elements
        const homePage = document.getElementById('home-page');
        const registerPage = document.getElementById('register-page');
        const loginPage = document.getElementById('login-page');
        const freelancersPage = document.getElementById('freelancers-page');
        const freelancerDetailPage = document.getElementById('freelancer-detail-page');
        const dashboardPage = document.getElementById('dashboard-page');
        
        // Form elements
        const freelancerForm = document.getElementById('freelancer-form');
        const clientForm = document.getElementById('client-form');
        const loginForm = document.getElementById('login-form-element');
        
        // Dashboard elements
        const userNameSpan = document.getElementById('user-name');
        const freelancerDashboard = document.getElementById('freelancer-dashboard');
        const clientDashboard = document.getElementById('client-dashboard');
        
        // Alert elements
        const successAlert = document.getElementById('success-alert');
        const errorAlert = document.getElementById('error-alert');
        const successMessage = document.getElementById('success-message');
        const errorMessage = document.getElementById('error-message');
        
        // UI Navigation Functions
        function showPage(pageToShow) {
          // Hide all pages first
          homePage.classList.add('hidden');
          registerPage.classList.add('hidden');
          loginPage.classList.add('hidden');
          freelancersPage.classList.add('hidden');
          freelancerDetailPage.classList.add('hidden');
          dashboardPage.classList.add('hidden');
          
          // Show the selected page
          pageToShow.classList.remove('hidden');
        }
        
        // Alert Functions
        function showAlert(type, message) {
          const alertElement = type === 'success' ? successAlert : errorAlert;
          const messageElement = type === 'success' ? successMessage : errorMessage;
          
          messageElement.textContent = message;
          alertElement.classList.remove('hidden');
          
          // Hide the alert after 3 seconds
          setTimeout(() => {
            alertElement.classList.add('hidden');
          }, 3000);
        }
        
        // Session Functions
        function updateUIForLoggedInUser(user) {
          navLogin.classList.add('hidden');
          navRegister.classList.add('hidden');
          navDashboard.classList.remove('hidden');
          navLogout.classList.remove('hidden');
        }
        
        function logout() {
          localStorage.removeItem('currentUser');
          
          navLogin.classList.remove('hidden');
          navRegister.classList.remove('hidden');
          navDashboard.classList.add('hidden');
          navLogout.classList.add('hidden');
          
          showPage(homePage);
          showAlert('success', 'You have been logged out successfully.');
        }
        
        // Check for logged in user on page load
        function checkLoggedInUser() {
          const currentUser = JSON.parse(localStorage.getItem('currentUser'));
          
          if (currentUser) {
            updateUIForLoggedInUser(currentUser);
          }
        }
        
        // Load User Dashboard 
        function loadUserDashboard() {
          const currentUser = JSON.parse(localStorage.getItem('currentUser'));
          
          if (!currentUser) {
            showPage(loginPage);
            return;
          }
          
          // Update the user name display
          userNameSpan.textContent = currentUser.name;
          
          // Show the appropriate dashboard based on user type
          if (currentUser.type === 'freelancer') {
            freelancerDashboard.classList.remove('hidden');
            clientDashboard.classList.add('hidden');
            
            // Update freelancer dashboard details
            document.getElementById('dashboard-name').textContent = currentUser.name;
            document.getElementById('dashboard-email').textContent = currentUser.email;
            document.getElementById('dashboard-skills').textContent = currentUser.skills.join(', ');
            document.getElementById('dashboard-rate').textContent = currentUser.rate;
            
            const portfolioLink = document.getElementById('dashboard-portfolio');
            if (currentUser.portfolio) {
              portfolioLink.href = currentUser.portfolio;
              portfolioLink.textContent = currentUser.portfolio;
            } else {
              portfolioLink.textContent = 'No portfolio provided';
              portfolioLink.removeAttribute('href');
            }
            
          } else if (currentUser.type === 'client') {
            freelancerDashboard.classList.add('hidden');
            clientDashboard.classList.remove('hidden');
            
            // Update client dashboard details
            document.getElementById('dashboard-client-name').textContent = currentUser.name;
            document.getElementById('dashboard-client-email').textContent = currentUser.email;
            document.getElementById('dashboard-client-company').textContent = currentUser.company || 'Not specified';
          }
        }
        
        // Initialize the app
        checkLoggedInUser();
        
        // Add event listeners for navigation
        navHome.addEventListener('click', (e) => {
          e.preventDefault();
          showPage(homePage);
        });
        
        navFreelancers.addEventListener('click', (e) => {
          e.preventDefault();
          showPage(freelancersPage);
          loadFreelancers();
        });
        
        navLogin.addEventListener('click', (e) => {
          e.preventDefault();
          showPage(loginPage);
        });
        
        navRegister.addEventListener('click', (e) => {
          e.preventDefault();
          showPage(registerPage);
        });
        
        navDashboard.addEventListener('click', (e) => {
          e.preventDefault();
          showPage(dashboardPage);
          loadUserDashboard();
        });
        
        navLogout.addEventListener('click', (e) => {
          e.preventDefault();
          logout();
        });
        
        // More functions and event listeners will be added in Part 2...
      });
    
      // Continue from previous script - add this inside the DOMContentLoaded event handler
    
    // Registration form toggling
    const showFreelancerRegister = document.getElementById('show-freelancer-register');
    const showClientRegister = document.getElementById('show-client-register');
    const freelancerRegisterForm = document.getElementById('freelancer-register-form');
    const clientRegisterForm = document.getElementById('client-register-form');
    
    showFreelancerRegister.addEventListener('click', function() {
      freelancerRegisterForm.classList.remove('hidden');
      clientRegisterForm.classList.add('hidden');
      showFreelancerRegister.classList.add('active');
      showClientRegister.classList.remove('active');
    });
    
    showClientRegister.addEventListener('click', function() {
      freelancerRegisterForm.classList.add('hidden');
      clientRegisterForm.classList.remove('hidden');
      showFreelancerRegister.classList.remove('active');
      showClientRegister.classList.add('active');
    });
    
    // Login form toggling
    document.getElementById('show-freelancer-login').addEventListener('click', function() {
      this.classList.add('active');
      document.getElementById('show-client-login').classList.remove('active');
      document.getElementById('login-user-type').value = 'freelancer';
    });
    
    document.getElementById('show-client-login').addEventListener('click', function() {
      this.classList.add('active');
      document.getElementById('show-freelancer-login').classList.remove('active');
      document.getElementById('login-user-type').value = 'client';
    });
    
    // Hero buttons and navigation shortcuts
    document.getElementById('join-as-client').addEventListener('click', function() {
      showPage(registerPage);
      showClientRegister.click();
    });
    
    document.getElementById('join-as-freelancer').addEventListener('click', function() {
      showPage(registerPage);
      showFreelancerRegister.click();
    });
    
    document.getElementById('go-to-register').addEventListener('click', function(e) {
      e.preventDefault();
      showPage(registerPage);
    });
    
    document.getElementById('go-to-login').addEventListener('click', function(e) {
      e.preventDefault();
      showPage(loginPage);
    });
    
    document.getElementById('go-to-login-from-client').addEventListener('click', function(e) {
      e.preventDefault();
      showPage(loginPage);
    });
    
    // Dashboard freelancer button
    document.getElementById('dashboard-find-freelancers').addEventListener('click', function() {
      showPage(freelancersPage);
      loadFreelancers();
    });
    
    // Back button on details page
    document.getElementById('back-to-freelancers').addEventListener('click', function(e) {
      e.preventDefault();
      showPage(freelancersPage);
    });
    
    // Close alert buttons
    document.querySelectorAll('.close-alert').forEach(function(button) {
      button.addEventListener('click', function() {
        this.parentElement.parentElement.classList.add('hidden');
      });
    });
    
    // Freelancer Registration Form Submit
    freelancerForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const name = document.getElementById('freelancer-name').value;
      const email = document.getElementById('freelancer-email').value;
      const password = document.getElementById('freelancer-password').value;
      const skills = document.getElementById('freelancer-skills').value.split(',').map(skill => skill.trim());
      const portfolio = document.getElementById('freelancer-portfolio').value;
      const rate = parseInt(document.getElementById('freelancer-rate').value);
      
      try {
        // Save freelancer data to Firebase
        const docRef = await addDoc(collection(db, "freelancers"), {
          name,
          email,
          skills,
          portfolio,
          rate,
          createdAt: new Date(),
          // In a real app, you would hash this password or use Firebase Authentication
          password
        });
        
        // Store user data in local storage for session management
        const userData = {
          id: docRef.id,
          name,
          email,
          skills,
          portfolio,
          rate,
          type: 'freelancer'
        };
        
        localStorage.setItem('currentUser', JSON.stringify(userData));
        
        // Show success message and update UI
        showAlert('success', 'Registration successful! Welcome to FreelanceHub.');
        updateUIForLoggedInUser(userData);
        showPage(dashboardPage);
        loadUserDashboard();
        
      } catch (error) {
        console.error("Error adding document: ", error);
        showAlert('error', 'Registration failed. Please try again.');
      }
    });
    
    // Client Registration Form Submit
    clientForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const name = document.getElementById('client-name').value;
      const email = document.getElementById('client-email').value;
      const password = document.getElementById('client-password').value;
      const company = document.getElementById('client-company').value;
      
      try {
        // Save client data to Firebase
        const docRef = await addDoc(collection(db, "clients"), {
          name,
          email,
          company,
          createdAt: new Date(),
          // In a real app, you would hash this password or use Firebase Authentication
          password
        });
        
        // Store user data in local storage
        const userData = {
          id: docRef.id,
          name,
          email,
          company,
          type: 'client'
        };
        
        localStorage.setItem('currentUser', JSON.stringify(userData));
        
        // Show success message and update UI
        showAlert('success', 'Registration successful! Welcome to FreelanceHub.');
        updateUIForLoggedInUser(userData);
        showPage(dashboardPage);
        loadUserDashboard();
        
      } catch (error) {
        console.error("Error adding document: ", error);
        showAlert('error', 'Registration failed. Please try again.');
      }
    });
    
    // Login Form Submit - Fixed implementation
    document.getElementById('login-form-element').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      const userType = document.getElementById('login-user-type').value;
      
      try {
        // This is a simplified login function for demonstration
        // In a real app, you would use Firebase Auth
        const collectionName = userType === 'freelancer' ? 'freelancers' : 'clients';
        
        // Query Firestore to find a user with matching email and password
        const q = query(collection(db, collectionName), 
                        where("email", "==", email), 
                        where("password", "==", password));
        
        const querySnapshot = await getDocs(q);
        
        if (querySnapshot.empty) {
          showAlert('error', 'Invalid email or password. Please try again.');
          return;
        }
        
        // Get the first matching user
        const userDoc = querySnapshot.docs[0];
        const userData = {
          id: userDoc.id,
          ...userDoc.data(),
          type: userType
        };
        
        // Remove password from user data before storing
        delete userData.password;
        
        localStorage.setItem('currentUser', JSON.stringify(userData));
        
        // Show success message and update UI
        showAlert('success', 'Login successful! Welcome back.');
        updateUIForLoggedInUser(userData);
        showPage(dashboardPage);
        loadUserDashboard();
        
      } catch (error) {
        console.error("Error during login: ", error);
        showAlert('error', 'Login failed. Please try again.');
      }
    });
    
    // Freelancer search and display functions 
    async function loadFreelancers() {
      const freelancersList = document.getElementById('freelancers-list');
      freelancersList.innerHTML = '<div class="freelancer-card placeholder"><div class="freelancer-info"><h3>Loading freelancers...</h3></div></div>';
      
      try {
        // Get all freelancers from Firestore
        const querySnapshot = await getDocs(collection(db, "freelancers"));
        
        if (querySnapshot.empty) {
          freelancersList.innerHTML = '<div class="freelancer-card placeholder"><div class="freelancer-info"><h3>No freelancers found</h3></div></div>';
          return;
        }
        
        // Clear the placeholder
        freelancersList.innerHTML = '';
        
        // Add each freelancer to the list
        querySnapshot.forEach((doc) => {
          const freelancer = doc.data();
          const freelancerId = doc.id;
          
          const skillsHtml = freelancer.skills.map(skill => 
            `<span class="skill-tag">${skill}</span>`
          ).join('');
          
          const card = document.createElement('div');
          card.className = 'freelancer-card';
          card.innerHTML = `
            <div class="freelancer-info">
              <h3>${freelancer.name}</h3>
              <p class="rate">$${freelancer.rate}/hr</p>
              <div class="skills-tags">
                ${skillsHtml}
              </div>
              <button class="btn-secondary view-profile" data-id="${freelancerId}">View Profile</button>
            </div>
          `;
          
          freelancersList.appendChild(card);
          
          // Add click event to view profile button
          card.querySelector('.view-profile').addEventListener('click', function() {
            const id = this.getAttribute('data-id');
            viewFreelancerProfile(id);
          });
        });
        
      } catch (error) {
        console.error("Error loading freelancers: ", error);
        freelancersList.innerHTML = '<div class="freelancer-card placeholder"><div class="freelancer-info"><h3>Error loading freelancers</h3></div></div>';
      }
    }
    
    // View Freelancer Profile
    async function viewFreelancerProfile(freelancerId) {
      try {
        // Get freelancer data from Firestore
        const docRef = doc(db, "freelancers", freelancerId);
        const docSnap = await getDoc(docRef);
        
        if (docSnap.exists()) {
          const freelancer = docSnap.data();
          
          // Update the profile page with freelancer data
          document.getElementById('profile-name').textContent = freelancer.name;
          document.getElementById('profile-rate').textContent = freelancer.rate;
          
          // Display skills
          const skillsContainer = document.getElementById('profile-skills');
          skillsContainer.innerHTML = '';
          
          freelancer.skills.forEach(skill => {
            const skillTag = document.createElement('span');
            skillTag.className = 'skill-tag';
            skillTag.textContent = skill;
            skillsContainer.appendChild(skillTag);
          });
          
          // Update portfolio link
          const portfolioElement = document.getElementById('profile-portfolio');
          if (freelancer.portfolio) {
            portfolioElement.innerHTML = `<a href="${freelancer.portfolio}" target="_blank">${freelancer.portfolio}</a>`;
          } else {
            portfolioElement.textContent = 'No portfolio provided';
          }
          
          // Show the detail page
          showPage(freelancerDetailPage);
          
        } else {
          showAlert('error', 'Freelancer not found');
        }
      } catch (error) {
        console.error("Error viewing freelancer profile: ", error);
        showAlert('error', 'Error loading freelancer profile');
      }
    }// Continue from previous script - add this inside the DOMContentLoaded event handler
    
    // Search functionality
    document.getElementById('search-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const searchSkills = document.getElementById('search-skills').value.trim().toLowerCase();
        const freelancersList = document.getElementById('freelancers-list');
        
        if (!searchSkills) {
          loadFreelancers();
          return;
        }
        
        freelancersList.innerHTML = '<div class="freelancer-card placeholder"><div class="freelancer-info"><h3>Searching freelancers...</h3></div></div>';
        
        try {
          // Get all freelancers from Firestore
          const querySnapshot = await getDocs(collection(db, "freelancers"));
          
          if (querySnapshot.empty) {
            freelancersList.innerHTML = '<div class="freelancer-card placeholder"><div class="freelancer-info"><h3>No freelancers found</h3></div></div>';
            return;
          }
          
          // Clear the placeholder
          freelancersList.innerHTML = '';
          
          let foundFreelancers = false;
          
          // Filter and add matching freelancers to the list
          querySnapshot.forEach((doc) => {
            const freelancer = doc.data();
            const freelancerId = doc.id;
            
            // Check if any of the freelancer's skills match the search term
            const hasMatchingSkill = freelancer.skills.some(skill => 
              skill.toLowerCase().includes(searchSkills)
            );
            
            if (hasMatchingSkill) {
              foundFreelancers = true;
              
              const skillsHtml = freelancer.skills.map(skill => 
                `<span class="skill-tag">${skill}</span>`
              ).join('');
              
              const card = document.createElement('div');
              card.className = 'freelancer-card';
              card.innerHTML = `
                <div class="freelancer-info">
                  <h3>${escapeHTML(freelancer.name)}</h3>
                  <p class="rate">$${freelancer.rate}/hr</p>
                  <div class="skills-tags">
                    ${skillsHtml}
                  </div>
                  <button class="btn-secondary view-profile" data-id="${freelancerId}">View Profile</button>
                </div>
              `;
              
              freelancersList.appendChild(card);
              
              // Add click event to view profile button
              card.querySelector('.view-profile').addEventListener('click', function() {
                const id = this.getAttribute('data-id');
                viewFreelancerProfile(id);
              });
            }
          });
          
          if (!foundFreelancers) {
            freelancersList.innerHTML = `<div class="freelancer-card placeholder"><div class="freelancer-info"><h3>No freelancers found with skills matching '${escapeHTML(searchSkills)}'</h3></div></div>`;
          }
          
        } catch (error) {
          console.error("Error searching freelancers: ", error);
          freelancersList.innerHTML = '<div class="freelancer-card placeholder"><div class="freelancer-info"><h3>Error searching freelancers</h3></div></div>';
        }
      });
      
      // Contact functionality
      document.getElementById('contact-freelancer').addEventListener('click', function() {
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        
        if (!currentUser) {
          showAlert('error', 'Please login to contact freelancers.');
          showPage(loginPage);
          return;
        }
        
        // In a real app, this would open a modal or redirect to a messaging page
        showAlert('success', 'Contact request sent! The freelancer will reach out to you soon.');
      });
      
      // Security enhancement: Input validation
      function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
      }
      
      function validatePassword(password) {
        return password.length >= 6;
      }
      
      // Add pre-submit validation to forms
      freelancerForm.addEventListener('submit', function(e) {
        const email = document.getElementById('freelancer-email').value;
        const password = document.getElementById('freelancer-password').value;
        
        if (!validateEmail(email)) {
          e.preventDefault();
          showAlert('error', 'Please enter a valid email address.');
          return false;
        }
        
        if (!validatePassword(password)) {
          e.preventDefault();
          showAlert('error', 'Password must be at least 6 characters.');
          return false;
        }
      });
      
      clientForm.addEventListener('submit', function(e) {
        const email = document.getElementById('client-email').value;
        const password = document.getElementById('client-password').value;
        
        if (!validateEmail(email)) {
          e.preventDefault();
          showAlert('error', 'Please enter a valid email address.');
          return false;
        }
        
        if (!validatePassword(password)) {
          e.preventDefault();
          showAlert('error', 'Password must be at least 6 characters.');
          return false;
        }
      });
      
      // Security enhancement: Escape HTML to prevent XSS attacks
      function escapeHTML(str) {
        return str
          .replace(/&/g, '&amp;')
          .replace(/</g, '&lt;')
          .replace(/>/g, '&gt;')
          .replace(/"/g, '&quot;')
          .replace(/'/g, '&#039;');
      }
      
      // Security enhancement: Rate limiting for login attempts
      const loginAttempts = {};
      
      loginForm.addEventListener('submit', function(e) {
        const email = document.getElementById('login-email').value;
        
        // Simple rate limiting for login attempts
        if (!loginAttempts[email]) {
          loginAttempts[email] = {
            count: 1,
            timestamp: Date.now()
          };
        } else {
          const attempt = loginAttempts[email];
          const currentTime = Date.now();
          const timeDiff = (currentTime - attempt.timestamp) / 1000; // Convert to seconds
          
          if (attempt.count >= 5 && timeDiff < 300) { // 5 attempts within 5 minutes
            e.preventDefault();
            showAlert('error', 'Too many login attempts. Please try again later.');
            return false;
          }
          
          // Reset count if more than 5 minutes have passed
          if (timeDiff >= 300) {
            attempt.count = 1;
            attempt.timestamp = currentTime;
          } else {
            attempt.count++;
          }
        }
      });
      
      // Load freelancers when the page loads if on the freelancers page
      if (!document.getElementById('freelancers-page').classList.contains('hidden')) {
        loadFreelancers();
      }
      
      // Enhance security by clearing sensitive data on reload
      window.addEventListener('beforeunload', function() {
        // Clear any sensitive data from forms
        document.getElementById('freelancer-password').value = '';
        document.getElementById('client-password').value = '';
        document.getElementById('login-password').value = '';
      });
      </script>
</body>

</html>
